<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fembo App</title>
<style>
body {
  margin: 0;
  font-family: sans-serif;
  display: flex;
  flex-direction: column;
  height: 100vh;
  background: #000;
  color: white;
  justify-content: center;
  align-items: center;
}

#photo-container {
  width: 90%;
  max-width: 500px;
  height: 300px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid #ff00ff;
  border-radius: 20px;
  margin: 10px;
  background: rgba(0,0,0,0.5);
  text-align: center;
}

.controls {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}

button {
  flex: 1;
  padding: 14px;
  background: #ff00ff;
  border: none;
  border-radius: 30px;
  color: white;
  font-weight: bold;
  font-size: 16px;
  cursor: pointer;
}

button:disabled {
  opacity: 0.5;
  cursor: default;
}
</style>
</head>
<body>

<div id="photo-container">–ù–∞–∂–º–∏ ¬´–ï–©–ï¬ª</div>

<div class="controls">
  <button onclick="goBack()">‚¨Ö –ù–∞–∑–∞–¥</button>
  <button onclick="toggleFav()">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
  <button onclick="openPost()">üîç –û—Ç–∫—Ä—ã—Ç—å</button>
</div>

<button id="nextBtn" onclick="loadPhoto()">üî• –ï–©–ï!</button>

<script>
var tg = window.Telegram && window.Telegram.WebApp;
if (tg) tg.expand();

// –ö–∞–Ω–∞–ª—ã
var sources = [
  { name: "femboyzl", max: 9910 },
  { name: "kotiki_uwu_2", max: 1468 }
];

// –ò—Å—Ç–æ—Ä–∏—è –∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
var history = [];
var favs = JSON.parse(localStorage.getItem("favs") || "[]");
var currentPost = null;
var lastPost = null;

// –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞
function loadPhoto() {
  var post;
  do {
    var src = sources[Math.floor(Math.random() * sources.length)];
    var gap = 300;
    var max = Math.max(1, src.max - gap);
    var id = Math.floor(Math.random() * max) + 1;
    post = { name: src.name, id: id };
  } while (lastPost && post.name === lastPost.name && post.id === lastPost.id);

  if (currentPost) history.push(currentPost);
  showPost(post);
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç, –±–µ–∑ embed)
function showPost(post) {
  currentPost = post;
  lastPost = post;

  var container = document.getElementById("photo-container");
  container.innerHTML = "–ü–æ—Å—Ç: <br>@" + post.name + "/" + post.id;

  updateFavButton();

  // Haptic feedback
  if (tg && tg.HapticFeedback) tg.HapticFeedback.impactOccurred("medium");
}

// –ù–∞–∑–∞–¥
function goBack() {
  if (!history.length) return;
  var prev = history.pop();
  showPost(prev);
}

// –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
function toggleFav() {
  if (!currentPost) return;
  var key = currentPost.name + "/" + currentPost.id;
  var idx = favs.indexOf(key);
  if (idx === -1) favs.push(key);
  else favs.splice(idx, 1);
  localStorage.setItem("favs", JSON.stringify(favs));
  updateFavButton();
}

function updateFavButton() {
  var btn = document.querySelector(".controls button:nth-child(2)");
  if (!currentPost) { btn.textContent = "‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ"; return; }
  var key = currentPost.name + "/" + currentPost.id;
  btn.textContent = favs.indexOf(key) !== -1 ? "üíñ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ" : "‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ";
}

// –£–≤–µ–ª–∏—á–∏—Ç—å / –æ—Ç–∫—Ä—ã—Ç—å –≤ Telegram
function openPost() {
  if (!currentPost) return;
  var url = "https://t.me/" + currentPost.name + "/" + currentPost.id;
  if (tg) tg.openLink(url);
  else window.open(url, "_blank");
}
</script>

</body>
</html>




