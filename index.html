<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fembo App</title>
<style>
body {
  margin: 0;
  font-family: sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  background: #000;
  color: #fff;
}

#photo-container {
  width: 90%;
  max-width: 400px;
  height: 250px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border: 2px solid #ff00ff;
  border-radius: 20px;
  margin: 10px;
  background: rgba(0,0,0,0.5);
  text-align: center;
  cursor: pointer;
}

#photo-container img {
  max-width: 100%;
  max-height: 150px;
  border-radius: 10px;
  margin-bottom: 10px;
}

.controls {
  display: flex;
  gap: 10px;
  width: 90%;
  max-width: 400px;
  margin-bottom: 10px;
}

button {
  flex: 1;
  padding: 10px;
  background: #ff00ff;
  border: none;
  border-radius: 25px;
  color: white;
  font-weight: bold;
  font-size: 14px;
  cursor: pointer;
}

button:disabled {
  opacity: 0.5;
  cursor: default;
}

#nextBtn {
  width: 90%;
  max-width: 400px;
  padding: 12px;
  margin-bottom: 10px;
}
</style>
</head>
<body>

<div id="photo-container" onclick="openPost()">
  –ù–∞–∂–º–∏ ¬´–ï–©–ï¬ª –¥–ª—è –ø–æ—Å—Ç–∞
</div>

<div class="controls">
  <button onclick="goBack()">‚¨Ö –ù–∞–∑–∞–¥</button>
  <button onclick="toggleFav()">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
  <button onclick="openPost()">üîç –û—Ç–∫—Ä—ã—Ç—å</button>
</div>

<button id="nextBtn" onclick="loadPhoto()">üî• –ï–©–ï!</button>

<script>
var tg = window.Telegram && window.Telegram.WebApp;
if (tg) tg.expand();

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–æ–≤
var sources = [
  { name: "femboyzl", max: 9910 },
  { name: "kotiki_uwu_2", max: 1468 }
];

var history = [];
var favs = JSON.parse(localStorage.getItem("favs") || "[]");
var currentPost = null;
var lastPost = null;

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞
function loadPhoto() {
  var post;
  do {
    var src = sources[Math.floor(Math.random() * sources.length)];
    var gap = 300;
    var max = Math.max(1, src.max - gap);
    var id = Math.floor(Math.random() * max) + 1;
    post = { name: src.name, id: id };
  } while (lastPost && post.name === lastPost.name && post.id === lastPost.id);

  if (currentPost) history.push(currentPost);
  showPost(post);
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å –ø—Ä–µ–≤—å—é
function showPost(post) {
  currentPost = post;
  lastPost = post;

  var container = document.getElementById("photo-container");
  var imgUrl = "https://t.me/" + post.name + "/" + post.id + "?embed=1"; // –º–∏–Ω–∏-–ø—Ä–µ–≤—å—é
  container.innerHTML = "<img src='" + imgUrl + "' alt='–ü—Ä–µ–≤—å—é –ø–æ—Å—Ç–∞'><div>@" + post.name + "/" + post.id + "</div>";

  updateFavButton();

  if (tg && tg.HapticFeedback) tg.HapticFeedback.impactOccurred("medium");
}

// –ò—Å—Ç–æ—Ä–∏—è –Ω–∞–∑–∞–¥
function goBack() {
  if (!history.length) return;
  var prev = history.pop();
  showPost(prev);
}

// –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
function toggleFav() {
  if (!currentPost) return;
  var key = currentPost.name + "/" + currentPost.id;
  var idx = favs.indexOf(key);
  if (idx === -1) favs.push(key);
  else favs.splice(idx, 1);
  localStorage.setItem("favs", JSON.stringify(favs));
  updateFavButton();
}

function updateFavButton() {
  var btn = document.querySelector(".controls button:nth-child(2)");
  if (!currentPost) { btn.textContent = "‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ"; return; }
  var key = currentPost.name + "/" + currentPost.id;
  btn.textContent = favs.indexOf(key) !== -1 ? "üíñ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ" : "‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ";
}

// –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Å—Ç –≤ Telegram viewer
function openPost() {
  if (!currentPost) return;
  var url = "https://t.me/" + currentPost.name + "/" + currentPost.id;
  if (tg) tg.openLink(url);
  else window.open(url, "_blank");
}
</script>

</body>
</html>






