<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Fembo App</title>
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
  // Telegram —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
  const tg = window.Telegram.WebApp;
  tg.expand();
</script>

<style>
body {
  margin: 0;
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: url('https://w.wallhaven.cc/full/m9/wallhaven-m93628.jpg') no-repeat center center fixed;
  background-size: cover;
  font-family: 'Rubik', sans-serif;
}

#viewer {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

#viewer img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border-radius: 10px;
  box-shadow: 0 0 20px rgba(255,0,255,0.5);
}

#controls {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 8px 0;
  background: rgba(0,0,0,0.4);
  gap: 15px;
}

button {
  background: #ff00ff;
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 45px;
  height: 45px;
  font-size: 22px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 3px 10px rgba(255,0,255,0.4);
  transition: transform 0.1s;
}

button:active {
  transform: scale(0.9);
}

button#favorite {
  font-size: 20px;
}
</style>
</head>
<body>

<div id="viewer">
  <img id="photo" src="" alt="–§–æ—Ç–æ">
</div>

<div id="controls">
  <button id="prevBtn">‚èÆÔ∏è</button>
  <button id="nextBtn">‚ñ∂Ô∏è</button>
  <button id="favorite">‚≠ê</button>
</div>

<script>
// === –°–ü–ò–°–û–ö –§–û–¢–û–ö ===
const photos = [];
for (let i = 1; i <= 389; i++) {
  photos.push(`fem (${i}).jpg`);
}

// === –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ===
let currentIndex = -1;
let history = [];
let favorites = JSON.parse(localStorage.getItem('favorites') || "[]");

// === DOM ===
const imgEl = document.getElementById('photo');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const favBtn = document.getElementById('favorite');

// === –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ñ–æ—Ç–æ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ –ø–æ–≤—Ç–æ—Ä ===
function loadRandom() {
  if (photos.length === 0) return;
  let index;
  let attempts = 0;
  do {
    index = Math.floor(Math.random() * photos.length);
    attempts++;
  } while (index === currentIndex && attempts < 10);
  currentIndex = index;
  history.push(currentIndex);
  imgEl.src = `images/${photos[currentIndex]}`;
  updateFavoriteButton();
}

// === –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ñ–æ—Ç–æ ===
function loadPrev() {
  if (history.length < 2) return;
  history.pop(); // —É–±–∏—Ä–∞–µ–º —Ç–µ–∫—É—â–∏–π
  currentIndex = history[history.length - 1];
  imgEl.src = `images/${photos[currentIndex]}`;
  updateFavoriteButton();
}

// === –ò–∑–±—Ä–∞–Ω–Ω–æ–µ ===
function toggleFavorite() {
  const photo = photos[currentIndex];
  const idx = favorites.indexOf(photo);
  if (idx === -1) favorites.push(photo);
  else favorites.splice(idx, 1);
  localStorage.setItem('favorites', JSON.stringify(favorites));
  updateFavoriteButton();
}

function updateFavoriteButton() {
  const photo = photos[currentIndex];
  favBtn.textContent = favorites.includes(photo) ? 'üíñ' : '‚≠ê';
}

// === –°–æ–±—ã—Ç–∏—è –∫–Ω–æ–ø–æ–∫ ===
nextBtn.onclick = loadRandom;
prevBtn.onclick = loadPrev;
favBtn.onclick = toggleFavorite;

// === –°—Ç–∞—Ä—Ç ===
loadRandom();
</script>
</body>
</html>















